<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hijri Calendar</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Lora:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .glass-effect {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 0.5rem;
        }
        .calendar-day {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 3rem;
            border-radius: 0.5rem;
        }
        .current-day {
            background-color: #FBBF24; /* amber-400 */
            color: #111827; /* gray-900 */
            font-weight: bold;
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-200 flex flex-col min-h-screen">

    <header class="bg-gray-900/80 backdrop-blur-sm sticky top-0 z-50 border-b border-gray-800">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="./index.html" class="text-2xl font-bold text-white">IslamicCalculations.io</a>
            
            <div class="relative">
                <button id="menu-toggle" class="text-white focus:outline-none p-2 rounded-md hover:bg-gray-700">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path>
                    </svg>
                </button>

                <div id="nav-links" class="hidden absolute right-0 mt-2 w-48 bg-gray-800 rounded-lg shadow-xl py-2 z-20">
                    <a href="./index.html" class="block px-4 py-2 text-gray-300 hover:text-yellow-400 hover:bg-gray-700 transition-colors">Home</a>
                    <a href="./zakat_calculator.html" class="block px-4 py-2 text-gray-300 hover:text-yellow-400 hover:bg-gray-700 transition-colors">Zakat</a>
                    <a href="./salah_times_calculator.html" class="block px-4 py-2 text-gray-300 hover:text-yellow-400 hover:bg-gray-700 transition-colors">Salah</a>
                    <a href="./hijri_calendar.html" class="block px-4 py-2 text-white font-semibold hover:bg-gray-700 transition-colors">Hijri Calendar</a>
                    <a href="./inheritance_calculator.html" class="block px-4 py-2 text-gray-300 hover:text-yellow-400 hover:bg-gray-700 transition-colors">Inheritance</a>
                    <a href="./abjad_calculator.html" class="block px-4 py-2 text-gray-300 hover:text-yellow-400 hover:bg-gray-700 transition-colors">Abjad</a>
                </div>
            </div>
        </nav>
    </header>

    <main class="flex-grow flex items-center justify-center p-4">
        <div class="w-full max-w-2xl mx-auto">
            <div class="glass-effect rounded-2xl shadow-2xl p-6 md:p-10 text-center">
                <h1 class="text-4xl md:text-5xl font-bold text-white" style="font-family: 'Lora', serif;">Hijri Calendar</h1>
                <p class="text-gray-400 mt-2">Live Hijri Date and Time for your region.</p>

                <div class="my-8 p-4 bg-gray-800/50 rounded-lg border border-gray-700">
                    <div id="live-hijri-date" class="text-2xl font-bold text-yellow-400">Loading...</div>
                    <div id="live-hijri-time" class="text-lg text-gray-300 mt-1">--:--:-- --</div>
                </div>
                
                <div class="flex justify-between items-center mb-4">
                    <button id="prevMonth" class="p-2 rounded-full hover:bg-gray-700 transition-colors">&lt;</button>
                    <h2 id="hijriMonthYear" class="text-2xl font-semibold text-yellow-400"></h2>
                    <button id="nextMonth" class="p-2 rounded-full hover:bg-gray-700 transition-colors">&gt;</button>
                </div>

                <div>
                    <div class="calendar-grid text-gray-400 mb-2">
                        <div>Sun</div><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div>
                    </div>
                    <div id="calendarDays" class="calendar-grid">
                        </div>
                </div>

                 <div class="text-left mt-8 pt-6 border-t border-gray-700">
                    <h3 class="text-xl font-semibold text-yellow-400 mb-2">About the Hijri Calendar</h3>
                    <p class="text-gray-400">
                        The Islamic calendar, or Hijri calendar, is a lunar calendar consisting of 12 months in a year of 354 or 355 days. It is used to determine the proper days of Islamic holidays and rituals.
                    </p>
                </div>
            </div>
        </div>
    </main>

    <footer class="bg-gray-900 border-t border-gray-800">
        <div class="container mx-auto px-6 py-6 text-center text-gray-500">
            <p>&copy; 2024 IslamicCalculations.io. All Rights Reserved.</p>
        </div>
    </footer>

    <script>
        // Dropdown menu toggle
        const menuToggle = document.getElementById('menu-toggle');
        const navLinks = document.getElementById('nav-links');
        menuToggle.addEventListener('click', (event) => {
            navLinks.classList.toggle('hidden');
            event.stopPropagation();
        });
        document.addEventListener('click', (event) => {
            if (!navLinks.contains(event.target) && !menuToggle.contains(event.target)) {
                navLinks.classList.add('hidden');
            }
        });

        // --- Live Hijri Date and Time ---
        const liveHijriDateEl = document.getElementById('live-hijri-date');
        const liveHijriTimeEl = document.getElementById('live-hijri-time');

        const liveHijriDateFormatter = new Intl.DateTimeFormat('en-u-ca-islamic-nu-latn', {
            weekday: 'long',
            day: 'numeric',
            month: 'long',
            year: 'numeric'
        });

        function updateLiveTime() {
            const now = new Date();
            liveHijriDateEl.textContent = liveHijriDateFormatter.format(now);
            liveHijriTimeEl.textContent = now.toLocaleTimeString('en-US');
        }

        // Update the time immediately and then every second
        updateLiveTime();
        setInterval(updateLiveTime, 1000);


        // --- Monthly Calendar Grid Logic ---
        const hijriMonthYearEl = document.getElementById('hijriMonthYear');
        const calendarDaysEl = document.getElementById('calendarDays');
        const prevMonthBtn = document.getElementById('prevMonth');
        const nextMonthBtn = document.getElementById('nextMonth');

        const hijriFormatter = new Intl.DateTimeFormat('en-u-ca-islamic-nu-latn', {
            day: 'numeric',
            month: 'long',
            year: 'numeric'
        });

        const today = new Date();
        const todayHijriParts = hijriFormatter.formatToParts(today).reduce((acc, part) => {
            acc[part.type] = part.value;
            return acc;
        }, {});
        
        let currentDate = new Date();

        function renderCalendar() {
            currentDate.setDate(1);
            const parts = hijriFormatter.formatToParts(currentDate).reduce((acc, part) => {
                acc[part.type] = part.value;
                return acc;
            }, {});
            hijriMonthYearEl.textContent = `${parts.month} ${parts.year}`;

            let hijriMonth = parseInt(parts.day, 10) > 15 ? parts.month : null;
            let tempDate = new Date(currentDate);

            while (true) {
                let p = hijriFormatter.formatToParts(tempDate).reduce((acc, part) => { acc[part.type] = part.value; return acc; }, {});
                if (parseInt(p.day, 10) === 1 && (hijriMonth === null || p.month === hijriMonth)) {
                    break;
                }
                tempDate.setDate(tempDate.getDate() - 1);
            }
            const firstDayOfHijriMonth = new Date(tempDate);
            const startDayOfWeek = firstDayOfHijriMonth.getDay();
            
            tempDate.setDate(tempDate.getDate() + 30);
            let nextMonthParts = hijriFormatter.formatToParts(tempDate).reduce((acc, part) => { acc[part.type] = part.value; return acc; }, {});
            const daysInMonth = (parseInt(nextMonthParts.day) > 2) ? 30 : 29;

            calendarDaysEl.innerHTML = '';
            for (let i = 0; i < startDayOfWeek; i++) {
                calendarDaysEl.innerHTML += `<div></div>`;
            }
            for (let day = 1; day <= daysInMonth; day++) {
                const dayEl = document.createElement('div');
                dayEl.textContent = day;
                dayEl.className = 'calendar-day';
                if (parts.month === todayHijriParts.month && parts.year === todayHijriParts.year && day === parseInt(todayHijriParts.day, 10)) {
                    dayEl.classList.add('current-day');
                }
                calendarDaysEl.appendChild(dayEl);
            }
        }

        prevMonthBtn.addEventListener('click', () => {
            currentDate.setMonth(currentDate.getMonth() - 1);
            renderCalendar();
        });

        nextMonthBtn.addEventListener('click', () => {
            currentDate.setMonth(currentDate.getMonth() + 1);
            renderCalendar();
        });

        document.addEventListener('DOMContentLoaded', renderCalendar);
    </script>
</body>
</html>